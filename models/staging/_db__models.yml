version: 2

models:
  - name: stg_db__actors
    description: '{{ doc("actors") }}'
    meta:
      contains_pii: true
    config:
      tags: [ 'films' ]
    columns:
      - name: actor_id
        description: '{{ doc("actor_id") }}'
        tests:
          - unique
          - not_null

      - name: name
        description: '{{ doc("actor_name") }}'
        meta:
          contains_pii: true

      - name: last_updated
        description: '{{ doc("last_updated") }}'

  - name: stg_db__addresses
    description: '{{ doc("addresses") }}'
    config:
      tags: [ "marketing", "stores" ]
    meta:
      contains_pii: true
    columns:
      - name: address_id
        description: '{{ doc("address_id") }}'
        tests:
          - unique
          - not_null

      - name: address
        description: '{{ doc("address") }}'
        meta:
          contains_pii: true

      - name: address2
        description: '{{ doc("address2") }}'
        meta:
          contains_pii: true

      - name: district
        description: '{{ doc("district") }}'
        meta:
          contains_pii: true

      - name: city_id
        description: '{{ doc("city_id") }}'
        tests:
          - relationships:
              to: ref('stg_db__cities')
              field: city_id

      - name: postal_code
        description: '{{ doc("postal_code") }}'
        meta:
          contains_pii: true

      - name: phone
        description: '{{ doc("phone") }}'
        meta:
          contains_pii: true

      - name: last_updated
        description: '{{ doc("last_updated") }}'

  - name: stg_db__categories
    description: ""
    config:
      tags: [ 'films' ]
    columns:
      - name: category_id
        description: ""
        tests:
          - unique
          - not_null

      - name: name
        description: ""

      - name: last_updated
        description: '{{ doc("last_updated") }}'

  - name: stg_db__cities
    description: ""
    config:
      tags: [ "marketing", "stores" ]
    columns:
      - name: city_id
        description: ""
        tests:
          - unique
          - not_null

      - name: city
        description: ""

      - name: country_id
        description: ""
        tests:
          - relationships:
              to: ref('stg_db__countries')
              field: country_id

      - name: last_updated
        description: '{{ doc("last_updated") }}'

  - name: stg_db__countries
    description: ""
    config:
      tags: [ "marketing", "stores" ]
    columns:
      - name: country_id
        description: ""
        tests:
          - unique
          - not_null

      - name: country
        description: ""

      - name: last_updated
        description: '{{ doc("last_updated") }}'

  - name: stg_db__customers
    description: ""
    config:
      tags: [ "marketing" ]
    meta:
      contains_pii: true
    columns:
      - name: customer_id
        description: ""
        tests:
          - unique
          - not_null

      - name: store_id
        description: ""

      - name: name
        description: ""
        meta:
          contains_pii: true

      - name: email
        description: ""
        meta:
          contains_pii: true

      - name: address_id
        description: ""
        tests:
          - relationships:
              to: ref('stg_db__addresses')
              field: address_id

      - name: activebool
        description: ""

      - name: create_date
        description: ""

      - name: last_updated
        description: '{{ doc("last_updated") }}'

      - name: active
        description: ""

  - name: stg_db__film_actors
    description: ""
    config:
      tags: [ 'films' ]
    columns:
      - name: actor_id
        description: ""
        tests:
          - relationships:
              to: ref('stg_db__actors')
              field: actor_id

      - name: film_id
        description: ""
        tests:
          - relationships:
              to: ref('stg_db__films')
              field: film_id

      - name: last_updated
        description: '{{ doc("last_updated") }}'

  - name: stg_db__film_categories
    description: ""
    config:
      tags: [ 'films' ]
    columns:
      - name: film_id
        description: ""
        tests:
          - unique
          - not_null
          - relationships:
              to: ref('stg_db__films')
              field: film_id

      - name: category_id
        description: ""
        tests:
          - relationships:
              to: ref('stg_db__categories')
              field: category_id

      - name: last_updated
        description: '{{ doc("last_updated") }}'

  - name: stg_db__films
    description: ""
    config:
      tags: [ 'films' ]
    columns:
      - name: film_id
        description: ""
        tests:
          - unique
          - not_null

      - name: title
        description: ""

      - name: description
        description: ""

      - name: release_year
        description: ""

      - name: language_id
        description: ""
        tests:
          - relationships:
              to: ref('stg_db__languages')
              field: language_id

      - name: rental_duration
        description: ""

      - name: rental_rate
        description: ""

      - name: length
        description: ""

      - name: replacement_cost
        description: ""

      - name: rating
        description: ""
        tests:
          - accepted_values:
              values: [ 'G', 'PG', 'PG-13', 'R', 'NC-17' ]

      - name: last_updated
        description: '{{ doc("last_updated") }}'

      - name: special_features
        description: ""

      - name: fulltext
        description: ""

  - name: stg_db__inventory
    description: ""
    config:
      tags: [ "finance" ]
    columns:
      - name: inventory_id
        description: ""
        tests:
          - unique
          - not_null

      - name: film_id
        description: ""
        tests:
          - relationships:
              to: ref('stg_db__films')
              field: film_id

      - name: store_id
        description: ""
        tests:
          - relationships:
              to: ref('stg_db__stores')
              field: store_id

      - name: last_updated
        description: '{{ doc("last_updated") }}'

  - name: stg_db__languages
    description: ""
    config:
      tags: [ 'films' ]
    columns:
      - name: language_id
        description: ""
        tests:
          - unique
          - not_null

      - name: name
        description: ""

      - name: last_updated
        description: '{{ doc("last_updated") }}'

  - name: stg_db__payments
    description: ""
    config:
      tags: [ "finance" ]
    columns:
      - name: payment_id
        description: ""
        tests:
          - unique
          - not_null

      - name: customer_id
        description: ""
        tests:
          - relationships:
              to: ref('stg_db__customers')
              field: customer_id

      - name: staff_id
        description: ""
        tests:
          - relationships:
              to: ref('stg_db__staff')
              field: staff_id

      - name: rental_id
        description: ""
        tests:
          - relationships:
              to: ref('stg_db__rentals')
              field: rental_id

      - name: amount
        description: ""

      - name: payment_date
        description: ""

  - name: stg_db__rentals
    description: ""
    config:
      tags: [ "finance" ]
    columns:
      - name: rental_id
        description: ""
        tests:
          - unique
          - not_null

      - name: rental_date
        description: ""

      - name: inventory_id
        description: ""
        tests:
          - relationships:
              to: ref('stg_db__inventory')
              field: inventory_id

      - name: customer_id
        description: ""
        tests:
          - relationships:
              to: ref('stg_db__customers')
              field: customer_id

      - name: return_date
        description: ""

      - name: staff_id
        description: ""
        tests:
          - relationships:
              to: ref('stg_db__staff')
              field: staff_id

      - name: last_updated
        description: '{{ doc("last_updated") }}'

  - name: stg_db__staff
    description: ""
    config:
      tags: [ "stores" ]
    meta:
      contains_pii: true
    columns:
      - name: staff_id
        description: ""
        tests:
          - unique
          - not_null

      - name: name
        description: ""
        meta:
          contains_pii: true

      - name: address_id
        description: ""
        tests:
          - relationships:
              to: ref('stg_db__addresses')
              field: address_id

      - name: email
        description: ""
        meta:
          contains_pii: true

      - name: store_id
        description: ""
        tests:
          - relationships:
              to: ref('stg_db__stores')
              field: store_id

      - name: active
        description: ""

      - name: username
        description: ""

      - name: password
        description: ""

      - name: last_updated
        description: '{{ doc("last_updated") }}'

      - name: picture
        description: ""

  - name: stg_db__stores
    description: ""
    config:
      tags: [ "marketing", "stores" ]
    columns:
      - name: store_id
        description: ""
        tests:
          - unique
          - not_null

      - name: manager_staff_id
        description: ""
        tests:
          - relationships:
              to: ref('stg_db__staff')
              field: staff_id

      - name: address_id
        description: ""
        tests:
          - relationships:
              to: ref('stg_db__addresses')
              field: address_id

      - name: last_updated
        description: '{{ doc("last_updated") }}'
